function SetFieldChoiceNumFormat(e){var i=jQuery("#list_choice_number_enable_"+e).is(":checked"),n=jQuery("#list_choice_number_format_"+e).val(),t=jQuery("#list_choice_number_rounding_"+e).val(),_=jQuery("#list_choice_number_fixed_point_"+e).is(":checked"),o=jQuery("#list_choice_number_rounding_direction_"+e).val(),l=jQuery("#list_choice_number_range_min_"+e).val(),a=jQuery("#list_choice_number_range_max_"+e).val(),c=jQuery("#list_choice_number_range_instructions_"+e).is(":checked"),r=jQuery("#list_choice_number_enable_calculation_"+e).is(":checked"),u=jQuery("#list_choice_number_enable_range_calculation_"+e).is(":checked"),s=jQuery("#list_choice_number_column_total_"+e).is(":checked");field=GetSelectedField(),field.choices[e].isNumber=i,field.choices[e].isNumberFormat=n,field.choices[e].isNumberRounding=t,field.choices[e].isNumberFixedPoint=_,field.choices[e].isNumberRoundingDirection=o,field.choices[e].isNumberRangeMin=l,field.choices[e].isNumberRangeMax=a,field.choices[e].isNumberRangeInstructions=c,field.choices[e].isNumberEnableCalculation=r,field.choices[e].isNumberColumnTotal=s,field.choices[e].isNumberEnableRangeCalculation=u,jQuery("#list_choice_range_min_calculation_formula_"+e).val(l),jQuery("#list_choice_range_max_calculation_formula_"+e).val(a),LoadBulkChoices(field),UpdateFieldChoices(GetInputType(field)),itsg_gf_list_numformat_format_preview(),itsg_gf_list_numformat_displayed_options(e)}function itsg_gf_list_numformat_format_preview(){for(var e=0;e<field.choices.length;e++){var i=jQuery("#list_choice_number_enable_"+e).is(":checked");if(1==i){var n="undefined"!=typeof field.choices[e].isNumberFormat?field.choices[e].isNumberFormat:"decimal_dot";if("currency"==n)var t=text_format_currency;else if("decimal_comma"==n)var t=text_format_decimal_comma;else var t=text_format_decimal_dot;var _='<input type="text" disabled="disabled" value="'+t+'">',o=e+1;jQuery("li#field_"+field.id+" table.gfield_list_container tbody tr td:nth-child("+o+")").html(_)}}}function itsg_gf_list_numformat_displayed_options(e){var i=jQuery("#list_choice_number_rounding_"+e),n=(jQuery('label[for="list_choice_number_rounding_'+e+'"]'),jQuery("#list_choice_number_rounding_direction_"+e)),t=jQuery('label[for="list_choice_number_rounding_direction_'+e+'"]'),_=jQuery('label[for="list_choice_number_fixed_point_'+e+'"]'),o=jQuery("#list_choice_number_fixed_point_"+e),l=jQuery("#list_choice_number_format_"+e).val(),a=(jQuery("#list_choice_number_format_"+e).val(),i.find("option:selected").val()),c=jQuery("#list_choice_number_enable_calculation_"+e).prop("checked"),r=jQuery("#list_choice_number_enable_range_calculation_"+e).prop("checked");c?jQuery(".list_choice_number_options_"+e+" #calculation_options_"+e).show():jQuery(".list_choice_number_options_"+e+" #calculation_options_"+e).hide(),r?(jQuery(".list_choice_number_options_"+e+" #range_min_calculation_options_"+e).show(),jQuery(".list_choice_number_options_"+e+" #range_max_calculation_options_"+e).show(),jQuery(".list_choice_number_options_"+e+" .range_min").hide(),jQuery(".list_choice_number_options_"+e+" .range_max").hide(),jQuery("#list_choice_number_range_instructions_"+e).hide(),jQuery("label[for=list_choice_number_range_instructions_"+e+"]").removeClass("inline").hide()):(jQuery(".list_choice_number_options_"+e+" #range_min_calculation_options_"+e).hide(),jQuery(".list_choice_number_options_"+e+" #range_max_calculation_options_"+e).hide(),jQuery(".list_choice_number_options_"+e+" .range_min").show(),jQuery(".list_choice_number_options_"+e+" .range_max").show(),jQuery("#list_choice_number_range_instructions_"+e).show(),jQuery("label[for=list_choice_number_range_instructions_"+e+"]").addClass("inline").show()),"currency"==l?(_.hide(),_.removeClass("inline"),o.hide(),(a>2||1==a||"norounding"==a)&&i.val(2),i.find("option").each(function(){var e=jQuery(this),i=jQuery(this).val();(i>2||1==i||"norounding"==i)&&e.hide()})):"norounding"==a?(_.hide(),_.removeClass("inline"),o.hide(),n.hide(),t.hide()):"0"==a?(_.hide(),_.removeClass("inline"),o.hide(),n.show(),t.show(),i.find("option").each(function(){jQuery(this).show()})):(_.show(),_.addClass("inline"),o.show(),n.show(),t.show(),i.find("option").each(function(){jQuery(this).show()}))}function isNumberFormulaContentCallback(e){if("single"==e)calculationFormula="isNumberCalculationFormula",SetFieldProperty(calculationFormula,jQuery("#list_choice_calculation_formula_"+e).val().trim());else{var i=jQuery("#list_choice_calculation_formula_"+e).val().trim();field.choices[e].isNumberCalculationFormula=i;var i=jQuery("#list_choice_range_min_calculation_formula_"+e).val().trim();field.choices[e].isNumberRangeMin=i,jQuery("#list_choice_number_range_min_"+e).val(i);var i=jQuery("#list_choice_range_max_calculation_formula_"+e).val().trim();field.choices[e].isNumberRangeMax=i,jQuery("#list_choice_number_range_max_"+e).val(i)}}function itsg_gf_list_numformat_init(){setTimeout(function(){var e=field.type;if("list"==e)if(field.enableColumns){jQuery(".list_number_settings").hide();for(var i=0;i<field.choices.length;i++){var n=field.choices[i].isNumber;if(1==n){if(!jQuery(".list_choice_number_options_"+i+" #calculation_options_"+i).length){var t=jQuery("#calculation_options").prop("outerHTML").replace(/FormulaContentCallback/g,"").replace(/calculation_options/g,"calculation_options_"+i).replace(/field_calculation_formula/g,"list_choice_calculation_formula_"+i).replace(/field.calculationFormula/g,"field.choices["+i+"].isNumberCalculationFormula");jQuery(".list_choice_number_options_"+i).append(t),jQuery("#calculation_options_"+i+" a.gf_tooltip").remove(),jQuery("#calculation_options_"+i+" #list_choice_calculation_formula_"+i+"_variable_select").change(function(){var e=jQuery(this).parents("div[id^='calculation_options_']").attr("id").replace("calculation_options_","");isNumberFormulaContentCallback(e)}),jQuery("#calculation_options_"+i+" div.gf_calculation_buttons input").click(function(){var e=jQuery(this).parents("div[id^='calculation_options_']").attr("id").replace("calculation_options_","");isNumberFormulaContentCallback(e)}),jQuery("#calculation_options_"+i+" textarea#list_choice_calculation_formula_"+i).change(function(){var e=jQuery(this).parents("div[id^='calculation_options_']").attr("id").replace("calculation_options_","");isNumberFormulaContentCallback(e)}),jQuery("li#field_"+field.id+" #list_choice_calculation_formula_"+i+'_variable_select optgroup[label="Custom"]').find("option").each(function(){""===jQuery(this).val()||-1!=jQuery(this).val().indexOf(":"+field.id+".")&&-1!=jQuery(this).text().indexOf("("+text_column_row_value+")")||jQuery(this).remove()}),jQuery("#calculation_options_"+i+" #field_calculation_rounding").remove(),jQuery("#calculation_options_"+i+' label[for="field_calculation_rounding"]').remove(),jQuery("<input>").attr({type:"checkbox",id:"list_choice_number_enable_calculation_"+i,onclick:"SetFieldChoiceNumFormat( "+i+" )",checked:field.choices[i].isNumberEnableCalculation}).insertBefore("#calculation_options_"+i),jQuery("<label>").attr({type:"checkbox","class":"inline","for":"list_choice_number_enable_calculation_"+i}).text(text_enable_calculation).insertBefore("#calculation_options_"+i),jQuery("#calculation_options_"+i).css("height","auto"),jQuery("#calculation_options_"+i+" textarea#list_choice_calculation_formula_"+i).css("height","80px")}if(!jQuery(".list_choice_number_options_"+i+" #range_min_calculation_options_"+i).length){var t=jQuery("#calculation_options").prop("outerHTML").replace(/FormulaContentCallback/g,"").replace(/calculation_options/g,"range_min_calculation_options_"+i).replace(/field_calculation_formula/g,"list_choice_range_min_calculation_formula_"+i).replace(/field.calculationFormula/g,"field.choices["+i+"].isNumberRangeMin");jQuery(".list_choice_number_options_"+i+" div.range").append(t),jQuery("#range_min_calculation_options_"+i+" a.gf_tooltip").remove(),jQuery("#range_min_calculation_options_"+i+" label").text(text_min_formula),jQuery("#range_min_calculation_options_"+i+" #list_choice_range_min_calculation_formula_"+i+"_variable_select").change(function(){var e=jQuery(this).parents("div[id^='range_min_calculation_options_']").attr("id").replace("range_min_calculation_options_","");isNumberFormulaContentCallback(e)}),jQuery("#range_min_calculation_options_"+i+" div.gf_calculation_buttons input").click(function(){var e=jQuery(this).parents("div[id^='range_min_calculation_options_']").attr("id").replace("range_min_calculation_options_","");isNumberFormulaContentCallback(e)}),jQuery("#range_min_calculation_options_"+i+" textarea#list_choice_range_min_calculation_formula_"+i).change(function(){var e=jQuery(this).parents("div[id^='range_min_calculation_options_']").attr("id").replace("range_min_calculation_options_","");isNumberFormulaContentCallback(e)}),jQuery("#list_choice_range_min_calculation_formula_"+i+'_variable_select optgroup[label="Allowable form fields"]').remove(),jQuery("li#field_"+field.id+" #list_choice_range_min_calculation_formula_"+i+"_variable_select").find("option").each(function(){""===jQuery(this).val()||-1!=jQuery(this).val().indexOf(":"+field.id+".")&&-1!=jQuery(this).text().indexOf("("+text_column_row_value+")")||jQuery(this).remove()}),jQuery("#range_min_calculation_options_"+i+" #field_calculation_rounding").remove(),jQuery("#range_min_calculation_options_"+i+' label[for="field_calculation_rounding"]').remove();var t=jQuery("#calculation_options").prop("outerHTML").replace(/FormulaContentCallback/g,"").replace(/calculation_options/g,"range_max_calculation_options_"+i).replace(/field_calculation_formula/g,"list_choice_range_max_calculation_formula_"+i).replace(/field.calculationFormula/g,"field.choices["+i+"].isNumberRangeMax");jQuery(".list_choice_number_options_"+i+" div.range").append(t),jQuery("#range_max_calculation_options_"+i+" a.gf_tooltip").remove(),jQuery("#range_max_calculation_options_"+i+" label").text(text_max_formula),jQuery("#range_max_calculation_options_"+i+" #list_choice_range_max_calculation_formula_"+i+"_variable_select").change(function(){var e=jQuery(this).parents("div[id^='range_max_calculation_options_']").attr("id").replace("range_max_calculation_options_","");isNumberFormulaContentCallback(e)}),jQuery("#range_max_calculation_options_"+i+" div.gf_calculation_buttons input").click(function(){var e=jQuery(this).parents("div[id^='range_max_calculation_options_']").attr("id").replace("range_max_calculation_options_","");isNumberFormulaContentCallback(e)}),jQuery("#range_max_calculation_options_"+i+" textarea#list_choice_range_max_calculation_formula_"+i).change(function(){var e=jQuery(this).parents("div[id^='range_max_calculation_options_']").attr("id").replace("range_max_calculation_options_","");isNumberFormulaContentCallback(e)}),jQuery("#list_choice_range_max_calculation_formula_"+i+'_variable_select optgroup[label="Allowable form fields"]').remove(),jQuery("li#field_"+field.id+" #list_choice_range_max_calculation_formula_"+i+"_variable_select").find("option").each(function(){""===jQuery(this).val()||-1!=jQuery(this).val().indexOf(":"+field.id+".")&&-1!=jQuery(this).text().indexOf("("+text_column_row_value+")")||jQuery(this).remove()}),jQuery("#range_max_calculation_options_"+i+" #field_calculation_rounding").remove(),jQuery("#range_max_calculation_options_"+i+' label[for="field_calculation_rounding"]').remove(),jQuery("<input>").attr({type:"checkbox",id:"list_choice_number_enable_range_calculation_"+i,onclick:"SetFieldChoiceNumFormat( "+i+" )",checked:field.choices[i].isNumberEnableCalculation}).insertBefore("#range_min_calculation_options_"+i),jQuery("<label>").attr({type:"checkbox","class":"inline","for":"list_choice_number_enable_range_calculation_"+i}).text(text_enable_range_calculation).insertBefore("#range_min_calculation_options_"+i),jQuery("#range_min_calculation_options_"+i).css("height","auto"),jQuery("#range_min_calculation_options_"+i+" textarea#list_choice_range_max_calculation_formula_"+i).css("height","80px")}jQuery(".list_choice_number_options_"+i).show();var n="undefined"!=typeof field.choices[i].isNumber?field.choices[i].isNumber:!1,_="undefined"!=typeof field.choices[i].isNumberFormat?field.choices[i].isNumberFormat:"decimal_dot",o="undefined"!=typeof field.choices[i].isNumberRounding?field.choices[i].isNumberRounding:"norounding",l="undefined"!=typeof field.choices[i].isNumberFixedPoint?field.choices[i].isNumberFixedPoint:!1,a="undefined"!=typeof field.choices[i].isNumberRoundingDirection?field.choices[i].isNumberRoundingDirection:"roundclosest",c="undefined"!=typeof field.choices[i].isNumberRangeMin?field.choices[i].isNumberRangeMin:"",r="undefined"!=typeof field.choices[i].isNumberRangeMax?field.choices[i].isNumberRangeMax:"",u="undefined"!=typeof field.choices[i].isNumberEnableCalculation?field.choices[i].isNumberEnableCalculation:!1,s="undefined"!=typeof field.choices[i].isNumberEnableRangeCalculation?field.choices[i].isNumberEnableRangeCalculation:!1,m="undefined"!=typeof field.choices[i].isNumberCalculationFormula?field.choices[i].isNumberCalculationFormula:"";jQuery("#field_columns #list_choice_number_enable_"+i).prop("checked",n),jQuery("#field_columns #list_choice_number_format_"+i).val(_),jQuery("#field_columns #list_choice_number_rounding_"+i).val(o),jQuery("#field_columns #list_choice_number_fixed_point_"+i).prop("checked",l),jQuery("#field_columns #list_choice_number_rounding_direction_"+i).val(a),jQuery("#field_columns #list_choice_number_range_min_"+i).val(c),jQuery("#field_columns #list_choice_number_range_max_"+i).val(r),jQuery("#field_columns #list_choice_number_enable_calculation_"+i).prop("checked",u),jQuery("#field_columns #list_choice_number_enable_range_calculation_"+i).prop("checked",s),jQuery("#field_columns #list_choice_calculation_formula_"+i).val(m),jQuery("#field_columns #list_choice_range_min_calculation_formula_"+i).val(c),jQuery("#field_columns #list_choice_range_max_calculation_formula_"+i).val(r),itsg_gf_list_numformat_displayed_options(i)}else jQuery(".list_choice_number_options_"+i).hide()}}else{var i="single";jQuery(".list_number_settings").show();var n="undefined"!=typeof field.isNumber?field.isNumber:!1,_="undefined"!=typeof field.isNumberFormat?field.isNumberFormat:"decimal_dot",o="undefined"!=typeof field.isNumberRounding?field.isNumberRounding:"norounding",l="undefined"!=typeof field.isNumberFixedPoint?field.isNumberFixedPoint:!1,a="undefined"!=typeof field.isNumberRoundingDirection?field.isNumberRoundingDirection:"roundclosest",c="undefined"!=typeof field.isNumberRangeMin?field.isNumberRangeMin:"",r="undefined"!=typeof field.isNumberRangeMax?field.isNumberRangeMax:"",d="undefined"!=typeof field.isNumberRangeInstructions?field.isNumberRangeInstructions:!0;jQuery("#field_settings .list_number_settings #list_number_enable").prop("checked",n),jQuery("#field_settings .list_number_settings #list_choice_number_format_single").val(_),jQuery("#field_settings .list_number_settings #list_choice_number_rounding_single").val(o),jQuery("#field_settings .list_number_settings #list_choice_number_fixed_point_single").prop("checked",l),jQuery("#field_settings .list_number_settings #list_choice_number_rounding_single_direction").val(a),jQuery("#field_settings .list_number_settings #list_choice_number_range_min_single").val(c),jQuery("#field_settings .list_number_settings #list_choice_number_range_max_single").val(r),jQuery("#field_settings .list_number_settings #list_choice_number_range_instructions_single").prop("checked",d),field.isNumber?(jQuery(".list_choice_number_options_"+i).show(),itsg_gf_list_numformat_displayed_options(i)):jQuery(".list_choice_number_options_"+i).hide()}},50)}var text_number_format=itsg_gf_listnumformat_admin_js_settings.text_number_format,text_enable_number_format=itsg_gf_listnumformat_admin_js_settings.text_enable_number_format,text_currency=itsg_gf_listnumformat_admin_js_settings.text_currency,text_rounding_direction=itsg_gf_listnumformat_admin_js_settings.text_rounding_direction,text_do_not_round=itsg_gf_listnumformat_admin_js_settings.text_do_not_round,text_rounding=itsg_gf_listnumformat_admin_js_settings.text_rounding,text_range=itsg_gf_listnumformat_admin_js_settings.text_range,text_min=itsg_gf_listnumformat_admin_js_settings.text_min,text_max=itsg_gf_listnumformat_admin_js_settings.text_max,text_enable_range_instructions=itsg_gf_listnumformat_admin_js_settings.text_enable_range_instructions,text_format_currency=itsg_gf_listnumformat_admin_js_settings.text_format_currency,text_format_decimal_dot=itsg_gf_listnumformat_admin_js_settings.text_format_decimal_dot,text_format_decimal_comma=itsg_gf_listnumformat_admin_js_settings.text_format_decimal_comma,text_fixed_point=itsg_gf_listnumformat_admin_js_settings.text_fixed_point,text_enable_calculation=itsg_gf_listnumformat_admin_js_settings.text_enable_calculation,text_enable_range_calculation=itsg_gf_listnumformat_admin_js_settings.text_enable_range_calculation,text_enable_column_total=itsg_gf_listnumformat_admin_js_settings.text_enable_column_total,text_min_formula=itsg_gf_listnumformat_admin_js_settings.text_min_formula,text_max_formula=itsg_gf_listnumformat_admin_js_settings.text_max_formula,text_column_row_value=itsg_gf_listnumformat_admin_js_settings.text_column_row_value;!function(e){var i=e.GetFieldChoices;e.GetFieldChoices=function(){var e=i.apply(this,[field]);if(void 0==field.choices)return"";for(var n=0;n<field.choices.length;n++){var t=GetInputType(field),_=field.choices[n].isNumber?"checked":"",o=field.choices[n].isNumberFixedPoint?"checked":"",l="undefined"==typeof field.choices[n].isNumberRangeInstructions||field.choices[n].isNumberRangeInstructions?"checked":"",a=field.choices[n].isNumberColumnTotal?"checked":"",c=field.enableChoiceValue?String(field.choices[n].value):field.choices[n].text;"list"==t&&(0==n&&(e+="<p><strong>"+text_number_format+"</strong></p>"),e+="<div>",e+="<input type='checkbox' name='choice_number_enable' id='list_choice_number_enable_"+n+"' "+_+" onclick='SetFieldChoiceNumFormat( "+n+" );itsg_gf_list_numformat_init();' /> ",e+="<label class='inline' for='list_choice_number_enable_"+n+"'>"+c+" - "+text_enable_number_format+"</label>",e+="<div style='display:none; background: rgb(244, 244, 244) none repeat scroll 0px 0px; padding: 10px; border-bottom: 1px solid grey; margin: 10px 0;' class='list_choice_number_options_"+n+"'>",e+="<div style='clear: both;'>",e+="<label class='section_label' for='list_choice_number_format_"+n+"'>",e+=text_number_format+"</label>",e+="</div>",e+="<select class='choice_number_format' id='list_choice_number_format_"+n+"' onchange='SetFieldChoiceNumFormat( "+n+" );' style='margin-bottom: 10px;' >",e+="<option value='decimal_dot'>9,999.99</option>",e+="<option value='decimal_comma'>9.999,99</option>",e+="<option value='currency'>"+text_currency+"</option>",e+="</select>",e+="<div style='clear: both;'>",e+="<label class='section_label' for='list_choice_number_rounding_"+n+"'>",e+=text_rounding+"</label>",e+="</div>",e+="<select class='choice_number_rounding' id='list_choice_number_rounding_"+n+"' onchange='SetFieldChoiceNumFormat( "+n+" );' style='margin-bottom: 10px;' >",e+="<option value='norounding'>Do not round</option>",e+="<option value='0'>0</option>",e+="<option value='1'>1</option>",e+="<option value='2'>2</option>",e+="<option value='3'>3</option>",e+="<option value='4'>4</option>",e+="<option value='5'>5</option>",e+="</select>",e+="<br>",e+="<input type='checkbox' id='list_choice_number_fixed_point_"+n+"' "+o+" onclick='SetFieldChoiceNumFormat( "+n+" );' /> ",e+="<label class='inline' for='list_choice_number_fixed_point_"+n+"'>"+text_fixed_point+"</label>",e+="<br>",e+="<br>",e+="<div style='clear: both;'>",e+="<label class='section_label' for='list_choice_number_rounding_direction_"+n+"'>",e+=text_rounding_direction+"</label>",e+="</div>",e+="<select class='choice_number_rounding_direction' id='list_choice_number_rounding_direction_"+n+"' onchange='SetFieldChoiceNumFormat( "+n+" ); itsg_gf_list_numformat_init();' style='margin-bottom: 10px;' >",e+="<option value='roundclosest'>Round closest</option>",e+="<option value='roundup'>Round up</option>",e+="<option value='rounddown'>Round down</option>",e+="</select>",e+="<br>",e+="<div style='clear: both;'>",e+="<label class='section_label'>"+text_range+"</label>",e+="</div>",e+="<div class='range'>",e+="<div class='range_min'>",e+="<input type='text' id='list_choice_number_range_min_"+n+"' onchange='SetFieldChoiceNumFormat( "+n+" );' >",e+="<label for='list_choice_number_range_min_"+n+"'>",e+=text_min+"</label>",e+="</div>",e+="<div class='range_max'>",e+="<input type='text' id='list_choice_number_range_max_"+n+"' onchange='SetFieldChoiceNumFormat( "+n+" );' >",e+="<label for='list_choice_number_range_max_"+n+"'>",e+=text_max+"</label>",e+="</div>",e+="<br>",e+="</div>",e+="<br>",e+="<input type='checkbox' id='list_choice_number_range_instructions_"+n+"' "+l+" onclick='SetFieldChoiceNumFormat( "+n+" );' >",e+="<label type='checkbox' class='inline' for='list_choice_number_range_instructions_"+n+"'>"+text_enable_range_instructions+"</label>",e+="<br>",e+="<br>",e+="<input type='checkbox' id='list_choice_number_column_total_"+n+"' "+a+" onclick='SetFieldChoiceNumFormat( "+n+" );' >",e+="<label type='checkbox' class='inline' for='list_choice_number_column_total_"+n+"'>"+text_enable_column_total+"</label>",e+="<br>",e+="</div>",e+="</div>")}return itsg_gf_list_numformat_init(),e}}(window||{}),jQuery(document).on("change","#gfield_settings_columns_container #field_columns li.field-choice-row",function(){itsg_gf_list_numformat_init()}),jQuery(document).on("change","#field_settings input[id=field_columns_enabled]",function(){itsg_gf_list_numformat_init()}),jQuery(document).bind("gform_load_field_settings",function(e,i,n){itsg_gf_list_numformat_init(),setTimeout(function(){"list"!=i.type&&jQuery("li#field_"+i.id+" #field_calculation_formula_variable_select").find("option").each(function(){""!==jQuery(this).val()&&-1!=jQuery(this).text().indexOf("("+text_column_row_value+")")&&jQuery(this).remove()})},50)});